# 产品对比

|                | **EDW(Enterprise Data Warehouse)**                         | **Data Lake**                                                |                                                              |                                                     |                                                              |                                                              |                                                              |
| -------------- | ---------------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | --------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 数据类型       | Structured Data                                            | Unstructured Data                                            |                                                              |                                                     |                                                              |                                                              |                                                              |
| 存储           | Centralized Storage & Processing                           | Decentralized Storage & Processing                           |                                                              |                                                     |                                                              |                                                              |                                                              |
| 价格           | Expensive                                                  | Cheap                                                        |                                                              |                                                     |                                                              |                                                              |                                                              |
|                |                                                            |                                                              |                                                              |                                                     |                                                              |                                                              |                                                              |
|                | **Snowflake Cloud Data Platform**                          | **Databricks Data Lakehouse**                                | **TiDB**                                                     | **Databend**                                        | **AnalyticDB**                                               | **Apache** **HAWQ**                                          | **ClickHouse**                                               |
| 数据格式       | 结构化、半结构化数据                                       | 结构化、半结构化、无结构化数据                               | 结构化数据                                                   | 结构化、半结构化(json)数据                          | 结构化+半结构化                                              | 结构化+半结构化+非结构化                                     | 结构化、半结构化(json)数据                                   |
| Data ownership | Snowflake owns both the data storage and processing layers | Databricks focuses more on the data processing and application layers.You can leave your data wherever it is (even on-premise), in any format | 数据存储+数据计算                                            | 数据存储+数据计算                                   | 存储依赖盘古，调度依赖伏羲，本身负责计算与解析               | 偏计算引擎，存储依赖HDFS                                     | 数据存储与数据计算耦合MPP架构                                |
| 场景           | SQL-based, Business Intelligence use cases                 | a variety of programming languages, data science & machine learning applications | 业务数据库+BI分析，实时存取与实时分析，一栈式数据服务生态，数据中枢层**。** | 实时数仓，多源联合分析等等                          | [应用场景](https://help.aliyun.com/document_detail/93838.html?spm=a2c4g.11186623.6.551.32832eb4ABsjnt)：实时数仓，精准营销，商业智能报表，多源联合分析，交互式查询 | OLAP数据仓库，机器学习                                       | 实时数仓，多源联合分析等等                                   |
| 架构           | MPP架构 shared disk + shared nothing                       | 批处理架构 shared nothing                                    | MPP架构                                                      | MPP架构 shared nothing                              | MPP+DAG                                                      | MPP+DAG                                                      | MPP架构 shared nothing                                       |
| 定位           | OLAP场景 云上数据仓库解决方案 基于数据仓库构建湖仓一体     | OLAP场景 统一的数据分析平台 基于数据湖构建湖仓一体           | HTAP场景 多场景融合                                          | OLAP场景 clickhouse内核+snowflake架构+spark编程接口 | 实时OLAP场景                                                 | OLAP                                                         | OLAP                                                         |
| 存储格式       | 列存                                                       | 列存                                                         | 行存+列存                                                    | 列存                                                | 行存+列存                                                    | 行存，列存可选                                               | 列存                                                         |
| 查询响应       | 批处理近实时                                               | 批处理近实时（分钟级~小时级） 流处理实时                     | 近实时                                                       | 实时（秒级）                                        | 实时                                                         | 实时                                                         | 实时（秒级）                                                 |
| 时间序列数据   | 不支持                                                     | 不支持                                                       | 不支持                                                       | 支持                                                | 不支持                                                       | 不支持                                                       | 支持                                                         |
| 编程接口       | SQL                                                        | Scala, java, R, python                                       | Tidb: sql TiSpark: SparkSQL, SparkJob Tikv: go,java,rust,c   | SQL Spark DataFrame Spark Streaming                 | [多种编程接口](https://help.aliyun.com/document_detail/122512.html)：Java, Python, C#, PHP, GO等 | Python, Perl, Java, C/C++, R                                 | SQL                                                          |
| 事务性         | 支持                                                       | 支持(delta lake)                                             | 支持                                                         | 计划支持？                                          | [支持](https://help.aliyun.com/document_detail/120144.html)  | 支持                                                         | 不支持                                                       |
| 数据集成       | s3文件、kafka、hive                                        | 支持传统ETL和用各种datasource直接访问数据                    | TIDB生态工具: [Lightning](https://docs.pingcap.com/zh/tidb/stable/tidb-lightning-overview), [Dumpling](https://docs.pingcap.com/zh/tidb/stable/dumpling-overview), [TiDB Data Migration (DM)](https://docs.pingcap.com/zh/tidb-data-migration/stable/overview), [TiDB Binlog](https://docs.pingcap.com/zh/tidb/stable/tidb-binlog-overview), [TiCDC](https://github.com/pingcap/ticdc), [TiSpark](https://docs.pingcap.com/zh/tidb/stable/tispark-overview) | 目前产品不够成熟                                    | [支持数据源](https://help.aliyun.com/document_detail/123754.htm?spm=a2c4g.11186623.2.5.426a4a484UAbjD#concept-2138717) | HDFS文件数据（读写） Hive（只读） HBase（只读） JSON（只读） AVRO | [集成引擎](https://clickhouse.tech/docs/zh/engines/table-engines/)：KAFKA,MYSQL,ODBC,JDBC,HDFS |
| 流式计算       | 不支持                                                     | 支持(spark streaming)                                        | 不支持                                                       | 不支持                                              | 不支持                                                       | 不支持                                                       | 不支持                                                       |

核心价值：

- 多模数据库：全文检索、宽表模型、图数据库
- 联邦查询：查询多种数据源，包括hive、hbase、es等
- 混合负载：即席查询和批处理查询
- 湖仓一体
- 混合云：公有云+私有云

# 参考资料

- https://www.datagrom.com/data-science-machine-learning-ai-blog/snowflake-vs-databricks
- https://pages.databricks.com/rs/094-YMS-629/images/Databricks_Primer_170303.pdf
- Lessons from building large-scale, multi-cloud, SaaS software at Databricks

  ppt：https://www.iteblog.com/ppt/sparkaisummit-north-america-2020-iteblog/lessons-from-building-largescale-multicloud-saas-software-at-databricks-iteblog.com.pdf

  讲稿：https://newstechtrend.com/lessons_from_building_large-scale_multi-cloud_saas_software_at_databricks_i2151

- 数据湖正演变为下一代企业数据仓库：https://time.geekbang.org/column/article/117867
- Snowflake 如日中天是否代表 Hadoop 已死？大数据体系到底是什么？：https://xie.infoq.cn/article/c25ec4079d3c04846021158a1
- 诸多老牌数据仓库厂商当前，Snowflake 如何创近 12 年最大 IPO 金额：https://xie.infoq.cn/article/8f30e823ba51be3462c0163c8
- Snowflake - A cloud scale data warehouse：https://www.linkedin.com/pulse/snowflake-cloud-scale-data-warehouse-rajib-deb
- 2021年中国数据库行业研究报告：https://mp.weixin.qq.com/s/bJm7rvfLtT5QdzFnKfjRhw